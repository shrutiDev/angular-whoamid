<div class="waid">
  <div class="comment"> 
    <div class="media">
      <div class="media-left" ng-show="waid.user">
        <img class="media-object" ng-src="{{ waid.user.avatar_thumb_50_50 }}" alt="{{ waid.user.default_name }}">
      </div>
      <div class="media-body">
        <textarea class="form-control" rows="3" ng-model="comment.comment" id="add_comment" msd-elastic></textarea><br />
        <button type="button" class="btn btn-default btn-xs pull-right" ng-click="post()" ng-disabled="comment.comment.length == 0">
            <span class="glyphicon glyphicon-pencil" aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.postCommentButton') }}
        </button>
        <button type="button" class="btn btn-default btn-xs pull-left" ng-click="addEmoji('add_comment', comment)">
            ðŸ˜„&nbsp;{{ ::waid.config.getConfig('comments.translations.addEmoticonButtonText') }}
        </button> 
        {{ currentEmoticonComment }}
      </div>
    </div>
    
    <br />
    <waid-comments-order-button ng-show="comments.length > 1" class="pull-right"></waid-comments-order-button><br />
    <div class="media" ng-repeat="comment in comments" style="overflow: visible;" ng-show="comments">
      <div class="media-left">
        <img class="media-object" ng-src="{{ comment.user.avatar_thumb_50_50 }}" alt="{{ comment.user.default_name }}">
      </div>
      <div class="media-body" style="overflow: visible;">
        <h4 class="media-heading">{{ comment.user.default_name }}<br />
          <small>{{ comment.created | date:'medium' }}</small>
          <div class="btn-group pull-right" ng-show="waid.user" ng-hide="comment.is_locked">
            <button type="button" class="btn btn-default btn-xs dropdown-toggle" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
              {{ ::waid.config.getConfig('comments.translations.actionDropdownTitle') }} <span class="caret"></span>
            </button>
            <ul class="dropdown-menu">
              <li><a ng-click="editComment(comment)" ng-show="comment.is_owner">
                <span class="glyphicon glyphicon-edit" aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.editCommentTitle') }}</a>
              </li>
              <li ng-show="!comment.marked_as_spam"><a ng-click="markComment(comment, 'SPAM')">
                <span class="glyphicon glyphicon-exclamation-sign aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.markCommentSpamTitle') }}</a>
              </li>
              <li role="separator" class="divider" ng-show="comment.is_owner"></li>
              <li><a ng-click="deleteComment(comment)" ng-show="comment.is_owner" confirm="{{ waid.config.getConfig('comments.translations.confirmDeleteContentBody') }}" confirm-title="{{ waid.config.getConfig('comments.translations.confirmDeleteContentTitle') }}">
                <span class="glyphicon glyphicon-remove-sign" aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.deleteCommentTitle') }}</a>
              </li>
            </ul>
          </div>
        </h4>
        <div ng-hide="comment.is_edit">
          <p style="white-space: pre-wrap;">{{ comment.comment_formatted }}</p>
          <div class="btn-group" role="group" aria-label="...">
            <button type="button" class="btn btn-default btn-xs" ng-click="voteComment(comment, 'UP')">
              <span class="glyphicon glyphicon-chevron-up" aria-hidden="true" ></span> {{ comment.vote_up_count }}
            </button>
            <button type="button" class="btn btn-default btn-xs" ng-click="voteComment(comment, 'DOWN')">
              <span class="glyphicon glyphicon-chevron-down" aria-hidden="true"></span> {{ comment.vote_down_count }}
            </button>
          </div>

          <small class="pull-right" ng-show="comment.marked_as_spam">
            <span class="glyphicon glyphicon-exclamation-sign aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.commentMarkedAsSpam') }}
          </small>
        </div>
        <div ng-show="comment.is_edit">
          <textarea class="form-control" rows="1" msd-elastic id="edit_comment_{{ comment.id }}"ng-model="comment.comment_formatted"></textarea>
          <p style="margin-top:10px;">
          <button type="button" class="btn btn-default btn-xs pull-right" ng-click="updateComment(comment)">
            <span class="glyphicon glyphicon-check" aria-hidden="true"></span> {{ ::waid.config.getConfig('comments.translations.updateCommentButton') }}
          </button>
          <button type="button" class="btn btn-default btn-xs pull-left" ng-click="addEmoji('edit_comment_' + comment.id, comment)">
              ðŸ˜„&nbsp;{{ ::waid.config.getConfig('comments.translations.addEmoticonButtonText') }}
          </button>
          </p>
        </div>
      </div>
    </div>

    <div class="text-center">
    <button type="button" class="btn btn-default btn-xs" ng-click="loadComments(true)" ng-show="showMore">
      <i class="fa fa-arrow-down" aria-hidden="true"></i> {{ ::waid.config.getTranslation('comments', 'loadMoreComments') }}
    </button>
    </div>
    
  </div>
</div>