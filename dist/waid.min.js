"use strict";angular.module("waid",["ngCookies","waid.templates","waid.core","waid.core.strategy","waid.core.services","waid.core.controllers","waid.core.directives","waid.idm","waid.comments"]).run(function(waidCore,waidCoreStrategy,waidCoreAppStrategy,waidService){waidCore.config.setConfig("api",{environment:{development:{url:"http://dev.whoamid.com:8000/nl/api"},test:{url:"http://test.whoamid.com:8001/nl/api"},staging:{url:"http://test.whoamid.com:8002/nl/api"},production:{url:"http://eu.whoamid.com/nl/api"}}}),waidCore.config.setConfig("core",{templates:{core:"/core/templates/core.html",emoticonsModal:"/core/templates/emoticons-modal.html"},errorCodes:{"auth-cancelled":"Authentication was canceled by the user.","auth-failed":"Authentication failed for some reason.","auth-unknown-error":"An unknown error stoped the authentication process.","auth-missing-parameter":"A needed parameter to continue the process was missing, usually raised by the services that need some POST data like myOpenID.","auth-state-missing":"The state parameter is missing from the server response.","auth-state-forbidden":"The state parameter returned by the server is not the one sent.","auth-token-error":"Unauthorized or access token error, it was invalid, impossible to authenticate or user removed permissions to it.","auth-already-associated":"A different user has already associated the social account that the current user is trying to associate.","system-error":"System error, failed for some reason."},translations:{emoticons:{people:"Mensen",nature:"Natuur",objects:"Objecten",places:"Plaatsen"}}}),waidService.initialize()}),angular.module("waid.core",["ngCookies"]).service("waidCore",function($rootScope,$cookies){var waid=angular.isDefined($rootScope.waid)?$rootScope.waid:{};return waid.config={},waid.config.mergeRecursive=function(obj1,obj2){for(var p in obj2)try{obj2[p].constructor==Object?obj1[p]=this.mergeRecursive(obj1[p],obj2[p]):obj1[p]=obj2[p]}catch(e){obj1[p]=obj2[p]}return obj1},waid.config.patchConfig=function(key,config){this[key]=this.mergeRecursive(this[key],config)},waid.config.setConfig=function(key,config){this[key]=config},waid.config.getConfig=function(key){if(key.indexOf(".")!==-1)var parts=key.split(".");else var parts=new Array(key);if(parts.length>0)for(var config=this,i=0;i<parts.length;i++){if("undefined"!=typeof config[parts[i]]){if("object"==typeof config[parts[i]]){config=config[parts[i]];continue}return config[parts[i]]}return!1}return this[key]},waid.isAuthenticated=function(){return!!(waid.user&&waid.account&&waid.application)},waid.closeAllModals=function(){waid.closeUserProfileModal(),waid.closeLoginAndRegisterModal(),waid.closeLostLoginModal(),waid.closeTermsAndConditionsModal()},waid.clearWaidData=function(){$rootScope.waid.account=!1,$rootScope.waid.application=!1,$rootScope.waid.user=!1,$cookies.remove("waid",{path:"/"})},waid.saveWaidData=function(){var waid={account:$rootScope.waid.account,application:$rootScope.waid.application,token:$rootScope.waid.token};$cookies.putObject("waid",waid,{path:"/"})},waid.getWaidData=function(){var waid=$cookies.getObject("waid");return!!waid&&waid},waid.utils={},waid.user=!1,waid.account=!1,waid.application=!1,waid.isInit=!1,waid.isLoggedIn=!1,$rootScope.waid=waid,waid}),angular.module("waid.core.strategy",["waid.core","waid.core.services"]).service("waidCoreStrategy",function($rootScope,waidCore,waidService,$location,$cookies){waidCore.checkLoading=function(){return waidService.running.length>0},waidCore.getAlCodeUrl=function(){var url=$location.absUrl();return 0==$location.$$html5&&$location.absUrl().indexOf("#")==-1&&(url+="#"),url+=$location.absUrl().indexOf("?")==-1||$location.absUrl().indexOf("#")?"?waidAlCode=[code]":"&waidAlCode=[code]"},waidCore.logout=function(){waidService.userLogoutPost(),waidService.user=!1},waidCore.logoutAll=function(){waidService.userLogoutAllPost(),waidService.user=!1},waidCore.addEmoticon=function(emoticon){var input=document.getElementById($rootScope.targetId);input.focus(),input.value=[input.value.slice(0,input.selectionStart),emoticon,input.value.slice(input.selectionStart)].join(""),input.focus(),$rootScope.waid.closeEmoticonsModal()},waidCore.initRetrieveData=function(accountId,applicationId){waidService.publicAccountGet(accountId).then(function(data){var application=data.main_application;delete data.main_application,waidCore.account=data,waidCore.application=application,waidService.applicationGet().then(function(data){console.log("Ja"),waidCore.application=data}),waidCore.saveWaidData()})},waidCore.initialize=function(){console.log("Initialize");var waidAccountId=$location.search().waidAccountId,waidApplicationId=$location.search().waidApplicationId;if(waidAccountId&&waidApplicationId&&(waidCore.account.id=waidAccountId,waidCore.application.id=waidApplicationId),waidCore.account.id&&waidCore.application.id){var waid=waidCore.getWaidData();if(waid&&waid.account&&waid.account.id==waidCore.account.id&&waid.application&&waid.application.id==waidCore.application.id)try{waidCore.account=waid.account,waidCore.application=waid.application,waidCore.token=waid.token}catch(err){waidCore.initRetrieveData(waidCore.account.id,waidCore.application.id)}else waidCore.initRetrieveData(waidCore.account.id,waidCore.application.id)}else{var waid=waidCore.getWaidData();if(waid&&waid.account&&waid.application)try{waidCore.account=waid.account,waidCore.application=waid.application,waidCore.token=waid.token}catch(err){waidCore.clearWaidData(),waidService._clearAuthorizationData()}else waidCore.clearWaidData(),waidService._clearAuthorizationData()}},waidCore.loginCheck=function(data){"undefined"!=typeof data.profile_status&&data.profile_status.length>0&&(data.profile_status.indexOf("profile_ok")!==-1&&$rootScope.$broadcast("waid.core.strategy.loginCheck.success",data),"undefined"!=typeof data.profile_status&&data.profile_status.indexOf("missing_profile_data")!==-1&&$rootScope.$broadcast("waid.core.strategy.loginCheck.completeProfile",data))},$rootScope.$watch("waid",function(waid){if("undefined"!=typeof waid){!waid.isInit&&waid.account&&waid.application&&(console.log(waid.token),waid.token&&!waid.isLoggedIn?(console.log("Authenticate"),waidService.authenticate().then(function(){waid.isLoggedIn=!0,waid.isInit=!0,console.log("Ja")},function(){waid.isLoggedIn=!1,waid.isInit=!0,console.log("Nee")})):(waid.isLoggedIn=!1,waid.isInit=!0),console.log("Waid Strategy init"),console.log(waid));var waidAlCode=$location.search().waidAlCode;waidAlCode&&waidService.userAutoLoginGet(waidAlCode).then(function(data){$location.search("waidAlCode",null)})}},!0)}),angular.module("waid.core.services",["waid.core"]).service("waidService",function($q,$http,$cookies,$rootScope,$location,waidCore){var service={API_URL:"",apiVersion:"v1",token:null,authenticated:!1,fp:"",running:[],request:function(args){var that=this;$http.defaults.headers.common["X-CSRFToken"]=$cookies.get("csrftoken"),null!=waidCore.token&&""!=waidCore.token&&"null"!=waidCore.token?$http.defaults.headers.common.Authorization="Token "+waidCore.token:$http.defaults.headers.common.Authorization=null,$http.defaults.headers.common.FPID=this.fp;var headers={};"undefined"!=typeof args.headers&&angular.extend(headers,args.headers),params=args.params||{},args=args||{};var deferred=$q.defer(),url=this.API_URL+args.url,method=args.method||"GET",params=params,data=args.data||{};return that.running.push(url),$http({url:url,method:method.toUpperCase(),headers:headers,params:params,data:data}).success(angular.bind(this,function(data,status,headers,config){var index=this.running.indexOf(url);index>-1&&this.running.splice(index,1),deferred.resolve(data,status)})).error(angular.bind(this,function(data,status,headers,config){var index=this.running.indexOf(url);index>-1&&this.running.splice(index,1),data&&(data.status=status),"undefined"!=typeof data&&"undefined"!=typeof data.error&&"undefined"!=data.error.code&&"invalid_authentication_credentials"==data.error.code&&that._clearAuthorizationData(),403==status&&$rootScope.$broadcast("waid.services.request.error",data),0==status&&(""==data&&(data={},data.status=0,data.non_field_errors=["Could not connect. Please try again."]),null==data&&(data={},data.status=0,data.non_field_errors=["Server timed out. Please try again."])),deferred.reject(data,status,headers,config)})),deferred.promise},_login:function(token){waidCore.token=token,waidCore.isLoggedIn=!0,waidCore.saveWaidData(),this.authenticate(),console.log("Login initialized")},_clearAuthorizationData:function(){this.authenticated=!1,waidCore.token=null,console.log("Logout initialized")},_makeFileRequest:function(method,path,broadcast,data){var deferred=$q.defer();return this.request({method:method,url:path,data:data,headers:{"Content-Type":void 0}}).then(function(data){$rootScope.$broadcast("waid.services."+broadcast+"."+method.toLowerCase()+".ok",data),deferred.resolve(data)},function(data){$rootScope.$broadcast("waid.services."+broadcast+"."+method.toLowerCase()+".error",data),deferred.reject(data)}),deferred.promise},_makeRequest:function(method,path,broadcast,data){var deferred=$q.defer();return this.request({method:method,url:path,data:data}).then(function(data){$rootScope.$broadcast("waid.services."+broadcast+"."+method.toLowerCase()+".ok",data),deferred.resolve(data)},function(data){$rootScope.$broadcast("waid.services."+broadcast+"."+method.toLowerCase()+".error",data),deferred.reject(data)}),deferred.promise},_getAdminUrl:function(url){return"/admin/"+this.apiVersion+"/"+waidCore.account.id+url},_getAppUrl:function(url){return"/application/"+this.apiVersion+"/"+waidCore.account.id+"/"+$rootScope.waid.application.id+url},_getPublicUrl:function(url){return"/public/"+this.apiVersion+url},userRegisterPost:function(data){return"undefined"!=typeof data.return_url&&""!=data.return_url||(data.return_url=waidCore.getAlCodeUrl()),this._makeRequest("POST",this._getAppUrl("/user/register/"),"application.userRegister",data)},userCompleteProfilePost:function(data){return"undefined"!=typeof data.return_url&&""!=data.return_url||(data.return_url=waidCore.getAlCodeUrl()),this._makeRequest("POST",this._getAppUrl("/user/complete-profile/"),"application.userCompleteProfile",data)},userCompleteProfileGet:function(){return this._makeRequest("GET",this._getAppUrl("/user/complete-profile/"),"application.userCompleteProfile")},userLoginPost:function(data){this._clearAuthorizationData();var that=this;return this._makeRequest("POST",this._getAppUrl("/user/login/"),"application.userLogin",data).then(function(data){return that._login(data.token),data})},userAutoLoginGet:function(code){var that=this;return this._clearAuthorizationData(),this._makeRequest("GET",this._getAppUrl("/user/autologin/"+code+"/"),"application.userAutoLogin").then(function(data){return that._login(data.token),data})},userLostLoginPost:function(data){return this._clearAuthorizationData(),this._makeRequest("POST",this._getAppUrl("/user/lost-login/"),"application.userLostLogin",data)},userLogoutPost:function(){var that=this;return this._makeRequest("POST",this._getAppUrl("/user/logout/"),"application.userLogout").then(function(data){return that._clearAuthorizationData(),waidCore.user=!1,data})},userLogoutAllPost:function(){var that=this;return this._makeRequest("POST",this._getAppUrl("/user/logout-all/"),"application.userLogoutAll").then(function(data){return that._clearAuthorizationData(),waidCore.user=!1,data})},userProfileGet:function(){return this._makeRequest("GET",this._getAppUrl("/user/profile/"),"application.userProfile")},userPasswordPut:function(data){return this._makeRequest("PUT",this._getAppUrl("/user/password/"),"application.userPassword",data)},userProfilePatch:function(data){return this._makeRequest("PATCH",this._getAppUrl("/user/profile/"),"application.userProfile",data)},userUsernamePut:function(data){return this._makeRequest("PUT",this._getAppUrl("/user/username/"),"application.userUsername",data)},userEmailListGet:function(){return this._makeRequest("GET",this._getAppUrl("/user/email/"),"application.userEmailList")},userEmailPost:function(data){return"undefined"!=typeof data.return_url&&""!=data.return_url||(data.return_url=waidCore.getAlCodeUrl()),this._makeRequest("POST",this._getAppUrl("/user/email/"),"application.userEmail",data)},userEmailDelete:function(id){return this._makeRequest("DELETE",this._getAppUrl("/user/email/"+id+"/"),"application.userEmail")},userAvatarPut:function(fd){return this._makeFileRequest("PUT",this._getAppUrl("/user/avatar/"),"application.userAvatar",fd)},socialProviderListGet:function(){return this._makeRequest("GET",this._getAppUrl("/social/providers/"),"application.socialProviderList")},userCommentsPatch:function(id,data){return this._makeRequest("PATCH",this._getAppUrl("/user/comments/"+id+"/"),"application.userComments",data)},userCommentsPost:function(data){return"undefined"!=typeof data.thread_id&&"currenturl"==data.thread_id&&(data.thread_id=waidCore.slugify($location.absUrl())),data.url=$location.absUrl(),this._makeRequest("POST",this._getAppUrl("/user/comments/"),"application.userComments",data)},userCommentsDelete:function(id){return this._makeRequest("DELETE",this._getAppUrl("/user/comments/"+id+"/"),"application.userComments")},userCommentsListGet:function(params){if("undefined"!=typeof params){"undefined"!=typeof params.thread_id&&"currenturl"==params.thread_id&&(params.thread_id=waidCore.slugify($location.absUrl()));var query="?"+$.param(params)}else var query="";return this._makeRequest("GET",this._getAppUrl("/user/comments/"+query),"application.userCommentsList")},commentsListGet:function(params){if("undefined"!=typeof params){"undefined"!=typeof params.thread_id&&"currenturl"==params.thread_id&&(params.thread_id=waidCore.slugify($location.absUrl()));var query="?"+$.param(params)}else var query="";return this._makeRequest("GET",this._getAppUrl("/comments/"+query),"application.commentsList")},commentsVotePost:function(id,vote){var data={vote:vote};return this._makeRequest("POST",this._getAppUrl("/comments/"+id+"/vote/"),"application.commentsVote",data)},commentsMarkPost:function(id,mark){var data={mark:mark};return this._makeRequest("POST",this._getAppUrl("/comments/"+id+"/mark/"),"application.commentsMark",data)},articlesListGet:function(){return this._makeRequest("GET",this._getAppUrl("/articles/"),"application.articlesList")},articlesGet:function(id){return this._makeRequest("GET",this._getAppUrl("/articles/"+id+"/"),"application.articles")},applicationGet:function(id){return this._makeRequest("GET",this._getAppUrl("/"),"application")},adminCommentsListGet:function(params){if("undefined"!=typeof params)var query="?"+$.param(params);else var query="";return this._makeRequest("GET",this._getAdminUrl("/comments/"+query),"admin.commentsListGet")},adminDefaultEmailTemplatesGet:function(){return this.adminDefaultEmailTemplatesGetRunning||(this.adminDefaultEmailTemplatesGetRunning=this._makeRequest("GET",this._getAdminUrl("/default-email-templates/"),"application.adminDefaultEmailTemplates")),this.adminDefaultEmailTemplatesGetRunning},adminCommentsPatch:function(id,data){return this._makeRequest("PATCH",this._getAdminUrl("/comments/"+id+"/"),"admin.commentsPatch",data)},adminCommentsDelete:function(id){return this._makeRequest("DELETE",this._getAdminUrl("/comments/"+id+"/"),"admin.CommentsDelete")},adminAccountGet:function(){return this._makeRequest("GET",this._getAdminUrl("/account/"),"admin.account")},adminAccountPatch:function(data){return this._makeRequest("PATCH",this._getAdminUrl("/account/"),"admin.account",data)},adminApplicationListGet:function(){return this._makeRequest("GET",this._getAdminUrl("/application/"),"admin.applicationList")},adminApplicationGet:function(id){return this._makeRequest("GET",this._getAdminUrl("/application/"+id+"/"),"admin.application")},adminApplicationPatch:function(data){return this._makeRequest("PATCH",this._getAdminUrl("/application/"+data.id+"/"),"admin.application",data)},publicAccountGet:function(account){return this._makeRequest("GET",this._getPublicUrl("/account/"+account+"/"),"public.account")},publicAccountCreatePost:function(data){return data.redirect_to_url=$location.absUrl()+"admin/"+data.slug+"/",this._makeRequest("POST",this._getPublicUrl("/account/create/"),"admin.accountCreate",data)},authenticate:function(){var that=this,deferred=$q.defer();return null!=waidCore.token&&""!=waidCore.token&&"null"!=waidCore.token?this.userProfileGet().then(function(data){that.authenticated=!0,waidCore.user=data,$rootScope.$broadcast("waid.services.authenticate.ok",that),deferred.resolve(data)},function(data){that.authenticated=!1,$rootScope.$broadcast("waid.services.authenticate.error",that),deferred.reject(data)}):(that.authenticated=!1,$rootScope.$broadcast("waid.services.authenticate.none"),deferred.reject()),deferred.promise},getAccountId:function(){return waidCore.account.id},initialize:function(url){var that=this;return"8000"==window.location.port?this.API_URL=waidCore.config.getConfig("api.environment.development.url"):"8001"==window.location.port?this.API_URL=waidCore.config.getConfig("api.environment.test.url"):"8002"==window.location.port?this.API_URL=waidCore.config.getConfig("api.environment.staging.url"):this.API_URL=waidCore.config.getConfig("api.environment.production.url"),(new Fingerprint2).get(function(result,components){that.fp=result,that.fpComponents=components}),this}};return service.initialize(),service}),angular.module("waid.core.controllers",["waid.core","waid.core.services","waid.idm.controllers","waid.core.strategy","waid.core.app.strategy"]).controller("WAIDCoreEmoticonModalCtrl",function($scope,$rootScope){$scope.emoticons={people:["ðŸ˜„","ðŸ˜†","ðŸ˜Š","ðŸ˜ƒ","ðŸ˜","ðŸ˜","ðŸ˜˜","ðŸ˜š","ðŸ˜³","ðŸ˜Œ","ðŸ˜†","ðŸ˜","ðŸ˜‰","ðŸ˜œ","ðŸ˜","ðŸ˜€","ðŸ˜—","ðŸ˜™","ðŸ˜›","ðŸ˜´","ðŸ˜Ÿ","ðŸ˜¦","ðŸ˜§","ðŸ˜®","ðŸ˜¬","ðŸ˜•","ðŸ˜¯","ðŸ˜‘","ðŸ˜’","ðŸ˜…","ðŸ˜“","ðŸ˜¥","ðŸ˜©","ðŸ˜”","ðŸ˜ž","ðŸ˜–","ðŸ˜¨","ðŸ˜°","ðŸ˜£","ðŸ˜¢","ðŸ˜­","ðŸ˜‚","ðŸ˜²","ðŸ˜±","ðŸ˜«","ðŸ˜ ","ðŸ˜¡","ðŸ˜¤","ðŸ˜ª","ðŸ˜‹","ðŸ˜·","ðŸ˜Ž","ðŸ˜µ","ðŸ‘¿","ðŸ˜ˆ","ðŸ˜","ðŸ˜¶","ðŸ˜‡","ðŸ‘½","ðŸ’›","ðŸ’™","ðŸ’œ","â¤","ðŸ’š","ðŸ’”","ðŸ’“","ðŸ’—","ðŸ’•","ðŸ’ž","ðŸ’˜","ðŸ’–","âœ¨","â­","ðŸŒŸ","ðŸ’«","ðŸ’¥","ðŸ’¥","ðŸ’¢","â—","â“","â•","â”","ðŸ’¤","ðŸ’¨","ðŸ’¦","ðŸŽ¶","ðŸŽµ","ðŸ”¥","ðŸ’©","ðŸ’©","ðŸ’©","ðŸ‘","ðŸ‘","ðŸ‘Ž","ðŸ‘Ž","ðŸ‘Œ","ðŸ‘Š","ðŸ‘Š","âœŠ","âœŒ","ðŸ‘‹","âœ‹","âœ‹","ðŸ‘","â˜","ðŸ‘‡","ðŸ‘ˆ","ðŸ‘‰","ðŸ™Œ","ðŸ™","ðŸ‘†","ðŸ‘","ðŸ’ª","ðŸƒ","ðŸƒ","ðŸ‘«","ðŸ‘ª","ðŸ‘¬","ðŸ‘­","ðŸ’ƒ","ðŸ‘¯","ðŸ™†","ðŸ™…","ðŸ’","ðŸ™‹","ðŸ‘°","ðŸ™Ž","ðŸ™","ðŸ™‡","ðŸ’","ðŸ’‘","ðŸ’†","ðŸ’‡","ðŸ’…","ðŸ‘¦","ðŸ‘§","ðŸ‘©","ðŸ‘¨","ðŸ‘¶","ðŸ‘µ","ðŸ‘´","ðŸ‘±","ðŸ‘²","ðŸ‘³","ðŸ‘·","ðŸ‘®","ðŸ‘¼","ðŸ‘¸","ðŸ˜º","ðŸ˜¸","ðŸ˜»","ðŸ˜½","ðŸ˜¼","ðŸ™€","ðŸ˜¿","ðŸ˜¹","ðŸ˜¾","ðŸ‘¹","ðŸ‘º","ðŸ™ˆ","ðŸ™‰","ðŸ™Š","ðŸ’‚","ðŸ’€","ðŸ¾","ðŸ‘„","ðŸ’‹","ðŸ’§","ðŸ‘‚","ðŸ‘€","ðŸ‘ƒ","ðŸ‘…","ðŸ’Œ","ðŸ‘¤","ðŸ‘¥","ðŸ’¬","ðŸ’­"],nature:["â˜€","â˜‚","â˜","â„","â˜ƒ","âš¡","ðŸŒ€","ðŸŒ","ðŸŒŠ","ðŸ±","ðŸ¶","ðŸ­","ðŸ¹","ðŸ°","ðŸº","ðŸ¸","ðŸ¯","ðŸ¨","ðŸ»","ðŸ·","ðŸ½","ðŸ®","ðŸ—","ðŸµ","ðŸ’","ðŸ´","ðŸŽ","ðŸ«","ðŸ‘","ðŸ˜","ðŸ¼","ðŸ","ðŸ¦","ðŸ¤","ðŸ¥","ðŸ£","ðŸ”","ðŸ§","ðŸ¢","ðŸ›","ðŸ","ðŸœ","ðŸž","ðŸŒ","ðŸ™","ðŸ ","ðŸŸ","ðŸ³","ðŸ‹","ðŸ¬","ðŸ„","ðŸ","ðŸ€","ðŸƒ","ðŸ…","ðŸ‡","ðŸ‰","ðŸ","ðŸ“","ðŸ•","ðŸ–","ðŸ","ðŸ‚","ðŸ²","ðŸ¡","ðŸŠ","ðŸª","ðŸ†","ðŸˆ","ðŸ©","ðŸ¾","ðŸ’","ðŸŒ¸","ðŸŒ·","ðŸ€","ðŸŒ¹","ðŸŒ»","ðŸŒº","ðŸ","ðŸƒ","ðŸ‚","ðŸŒ¿","ðŸ„","ðŸŒµ","ðŸŒ´","ðŸŒ²","ðŸŒ³","ðŸŒ°","ðŸŒ±","ðŸŒ¼","ðŸŒ¾","ðŸš","ðŸŒ","ðŸŒž","ðŸŒ","ðŸŒš","ðŸŒ‘","ðŸŒ’","ðŸŒ“","ðŸŒ”","ðŸŒ•","ðŸŒ–","ðŸŒ—","ðŸŒ˜","ðŸŒœ","ðŸŒ›","ðŸŒ™","ðŸŒ","ðŸŒŽ","ðŸŒ","ðŸŒ‹","ðŸŒŒ","â›…"],objects:["ðŸŽ","ðŸ’","ðŸŽŽ","ðŸŽ’","ðŸŽ“","ðŸŽ","ðŸŽ†","ðŸŽ‡","ðŸŽ","ðŸŽ‘","ðŸŽƒ","ðŸ‘»","ðŸŽ…","ðŸŽ„","ðŸŽ","ðŸ””","ðŸ”•","ðŸŽ‹","ðŸŽ‰","ðŸŽŠ","ðŸŽˆ","ðŸ”®","ðŸ’¿","ðŸ“€","ðŸ’¾","ðŸ“·","ðŸ“¹","ðŸŽ¥","ðŸ’»","ðŸ“º","ðŸ“±","â˜Ž","â˜Ž","ðŸ“ž","ðŸ“Ÿ","ðŸ“ ","ðŸ’½","ðŸ“¼","ðŸ”‰","ðŸ”ˆ","ðŸ”‡","ðŸ“¢","ðŸ“£","âŒ›","â³","â°","âŒš","ðŸ“»","ðŸ“¡","âž¿","ðŸ”","ðŸ”Ž","ðŸ”“","ðŸ”’","ðŸ”","ðŸ”","ðŸ”‘","ðŸ’¡","ðŸ”¦","ðŸ”†","ðŸ”…","ðŸ”Œ","ðŸ”‹","ðŸ“²","âœ‰","ðŸ“«","ðŸ“®","ðŸ›€","ðŸ›","ðŸš¿","ðŸš½","ðŸ”§","ðŸ”©","ðŸ”¨","ðŸ’º","ðŸ’°","ðŸ’´","ðŸ’µ","ðŸ’·","ðŸ’¶","ðŸ’³","ðŸ’¸","ðŸ“§","ðŸ“¥","ðŸ“¤","âœ‰","ðŸ“¨","ðŸ“¯","ðŸ“ª","ðŸ“¬","ðŸ“­","ðŸ“¦","ðŸšª","ðŸš¬","ðŸ’£","ðŸ”«","ðŸ”ª","ðŸ’Š","ðŸ’‰","ðŸ“„","ðŸ“ƒ","ðŸ“‘","ðŸ“Š","ðŸ“ˆ","ðŸ“‰","ðŸ“œ","ðŸ“‹","ðŸ“†","ðŸ“…","ðŸ“‡","ðŸ“","ðŸ“‚","âœ‚","ðŸ“Œ","ðŸ“Ž","âœ’","âœ","ðŸ“","ðŸ“","ðŸ“•","ðŸ“—","ðŸ“˜","ðŸ“™","ðŸ““","ðŸ“”","ðŸ“’","ðŸ“š","ðŸ”–","ðŸ“›","ðŸ”¬","ðŸ”­","ðŸ“°","ðŸˆ","ðŸ€","âš½","âš¾","ðŸŽ¾","ðŸŽ±","ðŸ‰","ðŸŽ³","â›³","ðŸšµ","ðŸš´","ðŸ‡","ðŸ‚","ðŸŠ","ðŸ„","ðŸŽ¿","â™ ","â™¥","â™£","â™¦","ðŸ’Ž","ðŸ’","ðŸ†","ðŸŽ¼","ðŸŽ¹","ðŸŽ»","ðŸ‘¾","ðŸŽ®","ðŸƒ","ðŸŽ´","ðŸŽ²","ðŸŽ¯","ðŸ€„","ðŸŽ¬","ðŸ“","ðŸ“","ðŸ“–","ðŸŽ¨","ðŸŽ¤","ðŸŽ§","ðŸŽº","ðŸŽ·","ðŸŽ¸","ðŸ‘ž","ðŸ‘¡","ðŸ‘ ","ðŸ’„","ðŸ‘¢","ðŸ‘•","ðŸ‘•","ðŸ‘”","ðŸ‘š","ðŸ‘—","ðŸŽ½","ðŸ‘–","ðŸ‘˜","ðŸ‘™","ðŸŽ€","ðŸŽ©","ðŸ‘‘","ðŸ‘’","ðŸ‘ž","ðŸŒ‚","ðŸ’¼","ðŸ‘œ","ðŸ‘","ðŸ‘›","ðŸ‘“","ðŸŽ£","â˜•","ðŸµ","ðŸ¶","ðŸ¼","ðŸº","ðŸ»","ðŸ¸","ðŸ¹","ðŸ·","ðŸ´","ðŸ•","ðŸ”","ðŸŸ","ðŸ—","ðŸ–","ðŸ","ðŸ›","ðŸ¤","ðŸ±","ðŸ£","ðŸ¥","ðŸ™","ðŸ˜","ðŸš","ðŸœ","ðŸ²","ðŸ¢","ðŸ¡","ðŸ³","ðŸž","ðŸ©","ðŸ®","ðŸ¦","ðŸ¨","ðŸ§","ðŸŽ‚","ðŸ°","ðŸª","ðŸ«","ðŸ¬","ðŸ­","ðŸ¯","ðŸŽ","ðŸ","ðŸŠ","ðŸ‹","ðŸ’","ðŸ‡","ðŸ‰","ðŸ“","ðŸ‘","ðŸˆ","ðŸŒ","ðŸ","ðŸ","ðŸ ","ðŸ†","ðŸ…","ðŸŒ½"],places:["ðŸ ","ðŸ¡","ðŸ«","ðŸ¢","ðŸ£","ðŸ¥","ðŸ¦","ðŸª","ðŸ©","ðŸ¨","ðŸ’’","â›ª","ðŸ¬","ðŸ¤","ðŸŒ‡","ðŸŒ†","ðŸ¯","ðŸ°","â›º","ðŸ­","ðŸ—¼","ðŸ—¾","ðŸ—»","ðŸŒ„","ðŸŒ…","ðŸŒ ","ðŸ—½","ðŸŒ‰","ðŸŽ ","ðŸŒˆ","ðŸŽ¡","â›²","ðŸŽ¢","ðŸš¢","ðŸš¤","â›µ","â›µ","ðŸš£","âš“","ðŸš€","âœˆ","ðŸš","ðŸš‚","ðŸšŠ","ðŸšž","ðŸš²","ðŸš¡","ðŸšŸ","ðŸš ","ðŸšœ","ðŸš™","ðŸš˜","ðŸš—","ðŸš—","ðŸš•","ðŸš–","ðŸš›","ðŸšŒ","ðŸš","ðŸš¨","ðŸš“","ðŸš”","ðŸš’","ðŸš‘","ðŸš","ðŸšš","ðŸš‹","ðŸš‰","ðŸš†","ðŸš…","ðŸš„","ðŸšˆ","ðŸš","ðŸšƒ","ðŸšŽ","ðŸŽ«","â›½","ðŸš¦","ðŸš¥","âš ","ðŸš§","ðŸ”°","ðŸ§","ðŸŽ°","ðŸš","ðŸ’ˆ","â™¨","ðŸ","ðŸŽŒ","ðŸ®","ðŸ—¿","ðŸŽª","ðŸŽ­","ðŸ“","ðŸš©"]}}).controller("WAIDCoreCtrl",function($scope,$rootScope,waidCore){angular.isDefined($rootScope.config)&&waidCore.config.patchConfig($rootScope.config),waidCore.account={id:!!angular.isDefined($scope.accountId)&&$scope.accountId},waidCore.application={id:!!angular.isDefined($scope.applicationId)&&$scope.applicationId},waidCore.initialize(),$scope.waid=waidCore}),angular.module("waid.core.directives",["waid.core","waid.core.controllers"]).directive("waid",function(waidCore){return{scope:{config:"@",applicationId:"@",accountId:"@"},restrict:"E",controller:"WAIDCoreCtrl",templateUrl:function(elem,attrs){return attrs.templateUrl||waidCore.config.core.templates.core}}}),angular.module("waid.idm",["waid.templates","waid.core","waid.idm.controllers","waid.idm.directives"]).run(function(waidCore,waidCoreStrategy,waidCoreAppStrategy,waidService){waidCore.config.setConfig("idm",{templates:{userProfileNavbar:"/idm/templates/user-profile-navbar.html",userProfileStatusButton:"/idm/templates/user-profile-status-button.html",termsAndConditionsModal:"/idm/templates/terms-and-conditions-modal.html",completeProfile:"/idm/templates/complete-profile.html",lostLoginModal:"/idm/templates/lost-login-modal.html",loginAndRegisterModal:"/idm/templates/login-and-register-modal.html",userProfileModal:"/idm/templates/user-profile-modal.html"},translations:{loggedin_success:"Succesvol ingelogd.",complete_profile_intro:"Om verder te gaan met jouw account hebben we wat extra gegevens nodig...",male:"Man",female:"Vrouw"}})}),angular.module("waid.idm.controllers",["waid.core"]).controller("WAIDIDMUserProfileHomeCtrl",function($scope,$rootScope,waidService,$routeParams){$scope.currentProfilePage="overview",$scope.showProfilePage=function(page){return page==$scope.currentProfilePage},$scope.getActiveProfilePageMenuClass=function(page){return page==$scope.currentProfilePage?"active":""},$scope.goToProfilePage=function(page){$scope.currentProfilePage=page},$rootScope.$on("waid.services.application.userProfile.patch.ok",function(event,data){$scope.currentProfilePage="overview"}),$rootScope.$on("waid.services.application.userProfile.put.ok",function(event,data){$scope.currentProfilePage="overview"})}).controller("WAIDIDMCompleteProfileCtrl",function($scope,$location,$window,waidService){$scope.mode="complete"}).controller("WAIDIDMLoginCtrl",function($scope,$location,waidService){$scope.model={username:"",password:""},$scope.errors=[],$scope.login=function(){waidService.userLoginPost($scope.model).then(function(data){},function(data){$scope.errors=data})}}).controller("WAIDIDMLostLoginCtrl",function($scope,$location,waidService){$scope.model={email:""},$scope.errors=[],$scope.submit=function(){waidService.userLostLoginPost($scope.model).then(function(data){$scope.errors=[]},function(data){$scope.errors=data})}}).controller("WAIDIDMUserProfileInterestsCtrl",function($scope,$rootScope,$location,waidCore,waidService){$scope.model=waidCore.user,$scope.save=function(){waidService.userProfilePatch($scope.model).then(function(data){$scope.errors=[]},function(data){$scope.errors=data})}}).controller("WAIDIDMUserProfileOverviewCtrl",function($scope,$rootScope,$location,waidCore,waidService){$scope.model=waidCore.user,waidService.userEmailListGet().then(function(data){$scope.emails=data}),$rootScope.$watch("waid.user",function(data){$scope.model=data},!0)}).controller("WAIDIDMUserProfileMainCtrl",function($scope,$rootScope,$location,waidCore,waidService,$filter,$timeout){$scope.model=waidCore.user,$scope.errors=[],$scope.profileDate=!1,$scope.isUploading=!1,$scope.dateOptions={dateDisabled:!1,maxDate:new Date,minDate:new Date(1940,1,1),startingDay:1,datepickerMode:"year"},$scope.popup={opened:!1},$scope.open=function(){$scope.popup.opened=!0},$scope.updateProfileInfo=function(){waidService.userProfileGet().then(function(data){$scope.errors=[],$scope.model=data,waidCore.user=data},function(data){$scope.errors=data})},$scope.uploadFile=function(files){$scope.isUploading=!0;var fd=new FormData;fd.append("file",files[0]),waidService.userAvatarPut(fd).then(function(data){$timeout(function(){$scope.save(),$scope.isUploading=!1},1e3)})},$scope.save=function(){"undefined"!=typeof $scope.profileDate&&$scope.profileDate&&($scope.model.date_of_birth=$filter("date")($scope.profileDate,"yyyy-MM-dd")),waidService.userProfilePatch($scope.model).then(function(data){$scope.model=data,waidCore.user=data,$scope.errors=[]},function(data){$scope.errors=data})},$scope.$watch("model.date_of_birth",function(date){if("undefined"!=typeof date&&null!=date){var dateParts=date.split("-");$scope.profileDate=new Date(dateParts[0],dateParts[1]-1,dateParts[2])}})}).controller("WAIDIDMUserProfilePasswordCtrl",function($scope,$rootScope,$location,waidService,$filter){$scope.model={},$scope.save=function(){waidService.userPasswordPut($scope.model).then(function(data){$scope.errors=[],$scope.model={}},function(data){$scope.errors=data})}}).controller("WAIDIDMUserProfileUsernameCtrl",function($scope,$rootScope,$location,waidCore,waidService,$filter){$scope.model={username:waidCore.user.username},$scope.save=function(){waidService.userUsernamePut($scope.model).then(function(data){$scope.errors=[]},function(data){$scope.errors=data})}}).controller("WAIDIDMUserProfileEmailCtrl",function($scope,$rootScope,$location,waidService){$scope.inactiveEmails=[],$scope.activeEmails=[],$scope.emailAdd="",$scope.initEmails=function(data){if($scope.inactiveEmails=[],$scope.activeEmails=[],data.length>0)for(var i=0;i<data.length;i++)1==data[i].is_verified?$scope.activeEmails.push(data[i]):$scope.inactiveEmails.push(data[i])},$scope.deleteEmail=function(id){waidService.userEmailDelete(id).then(function(data){$scope.errors=[],$scope.loadEmailList()},function(data){$scope.errors=data})},$scope.addEmail=function(){var data={email:$scope.emailAdd};waidService.userEmailPost(data).then(function(data){$scope.errors=[],$scope.loadEmailList(),$scope.emailAdd=""},function(data){$scope.errors=data})},$scope.loadEmailList=function(){waidService.userEmailListGet().then(function(data){$scope.initEmails(data)})},$scope.$watch("waid",function(waid){waid.isInit&&$scope.loadEmailList()},!0)}).controller("WAIDIDMSocialCtrl",function($scope,$location,waidService,$window,waidCore){$scope.providers=[],$scope.getProviders=function(){waidService.socialProviderListGet().then(function(data){for(var i=0;i<data.length;i++)data[i].url=data[i].url+"?return_url="+encodeURIComponent(waidCore.getAlCodeUrl());$scope.providers=data})},$scope.goToSocialLogin=function(provider){$window.location.assign(provider.url)},$scope.$watch("waid",function(waid){waid.account&&waid.application&&$scope.getProviders()},!0)}).controller("WAIDIDMRegisterCtrl",function($scope,$route,waidService,$location,$uibModal){$scope.show={},$scope.missingEmailVerification=!1,"complete"==$scope.modus?waidService.userCompleteProfileGet().then(function(data){$scope.model=data.user,"undefined"!=typeof data.profile_status&&data.profile_status.indexOf("email_is_not_verified")!==-1&&($scope.missingEmailVerification=!0);for(var i=0;i<data.missing_data.length;i++)$scope.show[data.missing_data[i]]=!0},function(data){}):($scope.missingEmailVerification=!1,$scope.show={username:!0,password:!0,email:!0,terms_and_conditions_check:!0}),$scope.register=function(){$scope.model.terms_and_conditions_check&&($scope.errors=[],"complete"==$scope.modus?waidService.userCompleteProfilePost($scope.model).then(function(data){$scope.model={}},function(data){$scope.errors=data}):waidService.userRegisterPost($scope.model).then(function(data){$scope.model={}},function(data){$scope.errors=data}))}}),angular.module("waid.idm.directives",["waid.core","waid.idm.controllers"]).directive("waidUserProfileNavbar",function(waidCore){return{restrict:"E",templateUrl:function(elem,attrs){return attrs.templateUrl||waidCore.config.idm.templates.userProfileNavbar}}}).directive("waidUserProfileStatusButton",function(waidCore){return{restrict:"E",templateUrl:function(elem,attrs){return attrs.templateUrl||waidCore.config.idm.templates.userProfileStatusButton}}}),angular.module("waid.comments",["waid.templates","waid.core","waid.idm","waid.comments.controllers","waid.comments.directives"]).run(function(waidCore,waidCoreStrategy,waidCoreAppStrategy,waidService){waidCore.config.setConfig("comments",{templates:{commentsHome:"/comments/templates/comments-home.html",commentsOrderButton:"/comments/templates/comments-order-button.html"},translations:{title:"Comments",notLoggedInText:"Om comments te plaatsen dien je een account te hebben, login of registreer je snel!",postCommentButton:"Plaats comment",actionDropdownTitle:"Opties",editCommentTitle:"Aanpassen",markCommentSpamTitle:"Markeer als spam",commentMarkedAsSpam:"Gemarkeerd als spam!",deleteCommentTitle:"Verwijderen",confirmDeleteContentBody:"Weet u zeker dat je de comment wilt verwijderen?",confirmDeleteContentTitle:"Comment verwijderen?",updateCommentButton:"Aanpassen",voteOrderNewestFirst:"Nieuwste eerst",voteOrderOldestFirst:"Oudste eerst",voteOrderTopFirst:"Top comments"}})}),angular.module("waid.comments.controllers",["waid.core","waid.core.strategy","waid.core.app.strategy"]).controller("WAIDCommentsCtrl",function($scope,$rootScope,waidService,$q,waidCoreStrategy,waidCoreAppStrategy){$scope.ordering=angular.isDefined($scope.ordering)?$scope.ordering:"-created",$scope.orderingEnabled=!angular.isDefined($scope.orderingEnabled)||"false"!=$scope.orderingEnabled,$scope.threadId=angular.isDefined($scope.threadId)?$scope.threadId:"currenturl",$scope.waid=$rootScope.waid,$scope.comment={comment:""},$scope.orderCommentList=function(ordering){$scope.ordering=ordering,$scope.loadComments()},$scope.voteComment=function(comment,vote){$rootScope.waid.user?waidService.commentsVotePost(comment.id,vote).then(function(data){comment.vote_up_count=data.vote_up_count,comment.vote_down_count=data.vote_down_count,comment.vote_count=data.vote_count}):$rootScope.waid.openLoginAndRegisterHomeModal()},$scope.markComment=function(comment,mark){waidService.commentsMarkPost(comment.id,mark).then(function(data){comment.marked_as_spam=data.marked_as_spam})},$scope.editComment=function(comment){comment.is_edit=!0},$scope.updateComment=function(comment){var patch_comment={comment:comment.comment_formatted};waidService.userCommentsPatch(comment.id,patch_comment).then(function(data){comment.is_edit=!1,comment.comment_formatted=data.comment_formatted,comment.comment=data.comment})},$scope.deleteComment=function(comment){waidService.userCommentsDelete(comment.id).then(function(data){var index=$scope.comments.indexOf(comment);$scope.comments.splice(index,1)})},$scope.loadComments=function(){waidService.commentsListGet({thread_id:$scope.threadId,ordering:$scope.ordering}).then(function(data){for(var i=0;i<data.length;i++)data[i].is_edit=!1,data[i].user.id==$rootScope.waid.user.id&&(data[i].is_owner=!0);$scope.comments=data})},$scope.post=function(){$scope.comment.thread_id=$scope.threadId,waidService.userCommentsPost($scope.comment).then(function(data){$scope.comment.comment="",
$scope.loadComments()})},$scope.$watch("threadId",function(threadId){""!=threadId&&$scope.loadComments()})}),angular.module("waid.comments.directives",["waid.core","waid.comments.controllers"]).directive("waidComments",function(waidCore){return{restrict:"E",scope:{ordering:"@?",threadId:"@?",orderingEnabled:"=?"},controller:"WAIDCommentsCtrl",templateUrl:function(elem,attrs){return attrs.templateUrl||waidCore.config.getConfig("comments.templates.commentsHome")}}}).directive("waidCommentsOrderButton",function(waidCore){return{restrict:"E",templateUrl:function(elem,attrs){return attrs.templateUrl||waidCore.config.getConfig("comments.templates.commentsOrderButton")}}});